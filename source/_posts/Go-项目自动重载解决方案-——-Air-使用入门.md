---
title: Go 项目自动重载解决方案 —— Air 使用入门
author: Alex
top: false
hide: false
cover: false
toc: true
mathjax: false
categories: Go
tags:
  - Go
  - Golang
abbrlink: 2968883c
date: 2024-07-08 12:09:33
img:
coverImg:
password:
summary:
---

在开发 Go 应用程序时，我们经常需要重启应用来加载最新的代码更改。这个过程虽然简单，但重复的操作会降低我们的开发效率。

今天，我们要介绍的工具 —— **Air**， 就是为了解决这个问题而生的。

下面，我们将一步步介绍如何使用 Air 来实现 Go 项目的自动重载，让你的开发过程更加顺畅。

## 什么是 Air？

[Air](https://github.com/cosmtrek/air) 是一个为 Go 项目提供自动重载功能的工具。通过监听项目中文件的变化，自动重新编译并运行你的应用，从而达到热重载的效果，极大地提升开发效率。Air 的使用也非常简单，下面我们将通过几个步骤来详细介绍。

## 安装 Air

安装 Air 的第一步是确保你的环境中安装了 Go，并且启用了 Go Module。这样我们可以更方便地管理项目的依赖。下面是安装 Air 的命令：

```bash
# 最前面的 GO111MODULE=on 是只为当前命令启用 Go Module
# 开启以后我们才能使用 Go Proxy 进行加速，以下命令会全局安装 Air
GO111MODULE=on  go install github.com/cosmtrek/air@latest
```

上述命令会通过 Go 的包管理工具下载并安装 Air 到你的 `$GOPATH/bin` 目录下，因此请确保这个目录包含在你的环境变量 `PATH` 中。

## 检查安装情况

安装完成后，我们可以通过下面的命令来检查 Air 是否安装成功：

```bash
air -v
```

如果安装成功，此命令将显示 Air 的版本信息。这说明 Air 已经准备好可以在你的项目中使用了。

## 使用 Air

接下来，让我们看看如何在实际项目中使用 Air 来实现自动重载功能。

1. **启动 Air**

在你的 Go 项目根目录下运行以下命令：

```bash
# 运行 Air
air
```

    这个命令会启动 Air，并根据 `air.toml` 配置文件（如果项目中没有这个文件，Air 会使用默认配置）来监听文件变化。一旦检测到文件更改，Air 会自动编译并重启你的应用。

2. **忽略临时文件**

启动 Air 之后，你会发现项目根目录下多了一个 `tmp` 文件夹，Air 使用这个文件夹来存放编译过程中产生的临时文件。因为这些文件通常不需要提交到版本控制系统中，所以你应该将 `tmp/` 添加到你的 `.gitignore` 文件中：

```bash
# .gitignore
tmp/
```

### 工作原理
air 通过监视项目文件的改动来工作。当它检测到文件变化时，air 会触发构建过程，并在构建成功后重启你的应用程序。这样，你就不需要每次修改代码后都手动重新编译和运行了。

## 结尾

使用 Air，你的 Go 项目开发过程将变得更加顺畅，不再需要手动重启应用来加载更改。通过自动重载，你可以更专注于代码的编写和调试，提高开发效率。

值得注意的是，虽然 Air 是一个强大方便的工具，但在生产环境下还是应该关闭自动重载功能，以保证应用的稳定性和性能。

希望这篇文章能帮助你更好地了解和使用 Air，让你的 Go 项目开发变得更加轻松和愉快。